# SPDX-License-Identifier: GPL-2.0
# Copyright (C) 2023 Analog Devices Inc.
%YAML 1.2
---
$id: http://devicetree.org/schemas/media/i2c/maxim-deserializer.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Maxim GMSL2 Deserializer

maintainers:
  - Cosmin Tanislav <cosmin.tanislav@analog.com>

allOf:
  - $ref: /schemas/pinctrl/i2c/i2c-atr.yaml#

unevaluatedProperties: false

required:
  - '#address-cells':
  - '#size-cells'
  - reg
  - i2c-atr
  - i2c-alias-pool

properties:
  '#address-cells':
    const: 1

  '#size-cells':
    const: 0

  reg:
    description: I2C device address
    maxItems: 1

  i2c-atr:
    type: object
    additionalProperties: false

    properties:
      '#address-cells':
        const: 1

      '#size-cells':
        const: 0

      maxim,pipe-stream-autoselect:
        type: boolean
        description: |
          Automatically select active streams for each pipe.
          If not specified, each pipe will receive a default stream id
          which can be overriden if needed.
          If specified, each pipe will receive data from all stream ids
          on its link, and the stream id cannot be overriden.
          Some chips might not support using this.

    patternProperties:
      '^i2c@[0-9a-f]+$':
        unevaluatedProperties: false

        allOf:
          - $ref: /schemas/i2c/i2c-controller.yaml

patternProperties:
  '^phy@[0-9a-f]+$':
    type: object
    additionalProperties: false

    properties:
      reg:
        description: The phy id.
        maxItems: 1

  '^pipe@[0-9a-f]+$':
    type: object
    additionalProperties: false

    properties:
      reg:
        description: The pipe id.
        maxItems: 1
